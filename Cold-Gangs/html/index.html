<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cold-Gangs</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="app" v-cloak>
        <div class="container" v-if="visible">
            <div class="sidebar">
                <div class="gang-info">
                    <h2>{{ gang.name }}</h2>
                    <div class="gang-tag">{{ gang.tag }}</div>
                    <div class="gang-rank">{{ getRankName(gang.rank) }}</div>
                    <div class="gang-bank">${{ formatNumber(gang.bank || 0) }}</div>
                </div>
                <div class="menu">
                    <div class="menu-item" :class="{ active: currentTab === 'dashboard' }" @click="setTab('dashboard')">
                        <i class="fas fa-home"></i> Dashboard
                    </div>
                    <div class="menu-item" :class="{ active: currentTab === 'members' }" @click="setTab('members')">
                        <i class="fas fa-users"></i> Members
                    </div>
                    <div class="menu-item" :class="{ active: currentTab === 'territories' }" @click="setTab('territories')">
                        <i class="fas fa-map-marked-alt"></i> Territories
                    </div>
                    <div class="menu-item" :class="{ active: currentTab === 'businesses' }" @click="setTab('businesses')">
                        <i class="fas fa-store"></i> Businesses
                    </div>
                    <div class="menu-item" :class="{ active: currentTab === 'drugs' }" @click="setTab('drugs')">
                        <i class="fas fa-cannabis"></i> Drugs
                    </div>
                    <div class="menu-item" :class="{ active: currentTab === 'wars' }" @click="setTab('wars')">
                        <i class="fas fa-fist-raised"></i> Wars
                    </div>
                    <div class="menu-item" :class="{ active: currentTab === 'heists' }" @click="setTab('heists')">
                        <i class="fas fa-mask"></i> Heists
                    </div>
                    <div class="menu-item" :class="{ active: currentTab === 'vehicles' }" @click="setTab('vehicles')">
                        <i class="fas fa-car"></i> Vehicles
                    </div>
                    <div class="menu-item" :class="{ active: currentTab === 'stashes' }" @click="setTab('stashes')">
                        <i class="fas fa-box"></i> Stashes
                    </div>
                    <div class="menu-item" :class="{ active: currentTab === 'bank' }" @click="setTab('bank')">
                        <i class="fas fa-money-bill-wave"></i> Bank
                    </div>
                    <div class="menu-item" :class="{ active: currentTab === 'settings' }" @click="setTab('settings')">
                        <i class="fas fa-cog"></i> Settings
                    </div>
                </div>
                <div class="close-btn" @click="closeUI">
                    <i class="fas fa-times"></i> Close
                </div>
            </div>
            <div class="content">
                <!-- Dashboard -->
                <div v-if="currentTab === 'dashboard'" class="tab-content">
                    <h2>Gang Dashboard</h2>
                    <div class="dashboard-stats">
                        <div class="stat-card">
                            <div class="stat-title">Members</div>
                            <div class="stat-value">{{ members.length }}</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-title">Territories</div>
                            <div class="stat-value">{{ territories.length }}</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-title">Bank</div>
                            <div class="stat-value">${{ formatNumber(gang.bank || 0) }}</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-title">Reputation</div>
                            <div class="stat-value">{{ gang.reputation || 0 }}</div>
                        </div>
                    </div>
                    <div class="dashboard-sections">
                        <div class="dashboard-section">
                            <h3>Recent Activity</h3>
                            <div class="activity-list">
                                <div v-for="(activity, index) in recentActivities" :key="index" class="activity-item">
                                    <div class="activity-time">{{ activity.time }}</div>
                                    <div class="activity-desc">{{ activity.description }}</div>
                                </div>
                                <div v-if="recentActivities.length === 0" class="empty-state">
                                    No recent activities
                                </div>
                            </div>
                        </div>
                        <div class="dashboard-section">
                            <h3>Online Members</h3>
                            <div class="online-members">
                                <div v-for="member in onlineMembers" :key="member.citizenId" class="online-member">
                                    <div class="member-name">{{ member.name }}</div>
                                    <div class="member-rank">{{ getRankName(member.rank) }}</div>
                                </div>
                                <div v-if="onlineMembers.length === 0" class="empty-state">
                                    No members online
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Members -->
                <div v-if="currentTab === 'members'" class="tab-content">
                    <h2>Gang Members</h2>
                    <div class="action-bar" v-if="hasPermission('inviteMembers')">
                        <button @click="inviteMember" class="action-btn">
                            <i class="fas fa-user-plus"></i> Invite Member
                        </button>
                    </div>
                    <div class="members-list">
                        <div v-for="member in members" :key="member.citizenId" class="member-card">
                            <div class="member-header">
                                <div class="member-name">{{ member.name }}</div>
                                <div class="member-status" :class="{ 'online': member.isOnline }">
                                    {{ member.isOnline ? 'Online' : 'Offline' }}
                                </div>
                            </div>
                            <div class="member-details">
                                <div class="member-rank">Rank: {{ getRankName(member.rank) }}</div>
                                <div class="member-joined">Joined: {{ formatDate(member.joinedAt) }}</div>
                            </div>
                            <div class="member-actions" v-if="hasPermission('manageRanks') || hasPermission('kickMembers')">
                                <button v-if="hasPermission('manageRanks') && member.rank < 6" @click="promoteMember(member)" class="action-btn small">
                                    <i class="fas fa-arrow-up"></i> Promote
                                </button>
                                <button v-if="hasPermission('manageRanks') && member.rank > 1" @click="demoteMember(member)" class="action-btn small">
                                    <i class="fas fa-arrow-down"></i> Demote
                                </button>
                                <button v-if="hasPermission('kickMembers')" @click="kickMember(member)" class="action-btn small danger">
                                    <i class="fas fa-user-minus"></i> Kick
                                </button>
                            </div>
                        </div>
                        <div v-if="members.length === 0" class="empty-state">
                            No members found
                        </div>
                    </div>
                </div>

                <!-- Territories -->
                <div v-if="currentTab === 'territories'" class="tab-content">
                    <h2>Territories</h2>
                    <div class="territories-list">
                        <div v-for="territory in territories" :key="territory.name" class="territory-card">
                            <div class="territory-header">
                                <div class="territory-name">{{ territory.name }}</div>
                                <div class="territory-type">{{ territory.type }}</div>
                            </div>
                            <div class="territory-details">
                                <div class="territory-income">Income: ${{ formatNumber(territory.income) }}/hr</div>
                                <div class="territory-status" :class="{ 'contested': territory.contested }">
                                    {{ territory.contested ? 'Contested' : 'Secure' }}
                                </div>
                            </div>
                            <div class="territory-actions">
                                <button @click="viewTerritory(territory)" class="action-btn small">
                                    <i class="fas fa-map-marker-alt"></i> View
                                </button>
                                <button v-if="hasPermission('manageTerritories')" @click="abandonTerritory(territory)" class="action-btn small danger">
                                    <i class="fas fa-flag"></i> Abandon
                                </button>
                            </div>
                        </div>
                        <div v-if="territories.length === 0" class="empty-state">
                            No territories owned
                        </div>
                    </div>
                </div>

                <!-- Businesses -->
                <div v-if="currentTab === 'businesses'" class="tab-content">
                    <h2>Businesses</h2>
                    <div class="action-bar" v-if="hasPermission('manageBusinesses')">
                        <button @click="showCreateBusinessModal" class="action-btn">
                            <i class="fas fa-plus"></i> Create Business
                        </button>
                    </div>
                    <div class="businesses-list">
                        <div v-for="business in businesses" :key="business.id" class="business-card">
                            <div class="business-header">
                                <div class="business-name">{{ business.type }} (Level {{ business.level }})</div>
                                <div class="business-income">${{ formatNumber(business.income) }}/hr</div>
                            </div>
                            <div class="business-details">
                                <div class="business-stored">Stored: ${{ formatNumber(business.income_stored) }}</div>
                                <div class="business-employees">Employees: {{ business.employees }}</div>
                                <div class="business-security">Security: {{ business.security }}</div>
                            </div>
                            <div class="business-actions">
                                <button @click="collectBusinessIncome(business)" class="action-btn small">
                                    <i class="fas fa-hand-holding-usd"></i> Collect
                                </button>
                                <button @click="manageBusiness(business)" class="action-btn small">
                                    <i class="fas fa-cog"></i> Manage
                                </button>
                                <button v-if="hasPermission('manageBusinesses')" @click="showUpgradeBusinessModal(business)" class="action-btn small">
                                    <i class="fas fa-arrow-up"></i> Upgrade
                                </button>
                            </div>
                        </div>
                        <div v-if="businesses.length === 0" class="empty-state">
                            No businesses owned
                        </div>
                    </div>
                </div>

                <!-- Drugs -->
                <div v-if="currentTab === 'drugs'" class="tab-content">
                    <h2>Drug Operations</h2>
                    <div class="drugs-sections">
                        <div class="drugs-section">
                            <h3>Fields</h3>
                            <div class="drugs-list">
                                <div v-for="field in drugs.fields" :key="field.id" class="drug-card">
                                    <div class="drug-header">
                                        <div class="drug-name">{{ field.resourceType }} Field</div>
                                        <div class="drug-stage">Stage: {{ field.growthStage }}/10</div>
                                    </div>
                                    <div class="drug-details">
                                        <div class="drug-yield">Yield: {{ field.maxYield }} units</div>
                                        <div class="drug-quality">Quality: {{ field.qualityRangeMin }}-{{ field.qualityRangeMax }}%</div>
                                    </div>
                                    <div class="drug-actions">
                                        <button @click="viewField(field)" class="action-btn small">
                                            <i class="fas fa-map-marker-alt"></i> View
                                        </button>
                                        <button @click="harvestField(field)" class="action-btn small" :disabled="field.growthStage < 10">
                                            <i class="fas fa-leaf"></i> Harvest
                                        </button>
                                    </div>
                                </div>
                                <div v-if="drugs.fields.length === 0" class="empty-state">
                                    No fields owned
                                </div>
                            </div>
                        </div>
                        <div class="drugs-section">
                            <h3>Labs</h3>
                            <div class="drugs-list">
                                <div v-for="lab in drugs.labs" :key="lab.id" class="drug-card">
                                    <div class="drug-header">
                                        <div class="drug-name">{{ lab.drugType }} Lab</div>
                                        <div class="drug-level">Level: {{ lab.level }}</div>
                                    </div>
                                    <div class="drug-details">
                                        <div class="drug-capacity">Capacity: {{ lab.capacity }} units</div>
                                        <div class="drug-security">Security: {{ lab.security }}</div>
                                    </div>
                                    <div class="drug-actions">
                                        <button @click="processDrugs(lab)" class="action-btn small">
                                            <i class="fas fa-flask"></i> Process
                                        </button>
                                        <button v-if="hasPermission('manageDrugs')" @click="upgradeLab(lab)" class="action-btn small">
                                            <i class="fas fa-arrow-up"></i> Upgrade
                                        </button>
                                    </div>
                                </div>
                                <div v-if="drugs.labs.length === 0" class="empty-state">
                                    No labs owned
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Wars -->
                <div v-if="currentTab === 'wars'" class="tab-content">
                    <h2>Gang Wars</h2>
                    <div class="action-bar" v-if="hasPermission('declareWar')">
                        <button @click="showDeclareWarModal" class="action-btn">
                            <i class="fas fa-fist-raised"></i> Declare War
                        </button>
                    </div>
                    <div class="wars-list">
                        <div v-for="war in wars" :key="war.id" class="war-card">
                            <div class="war-header">
                                <div class="war-name">{{ war.attackerName }} vs {{ war.defenderName }}</div>
                                <div class="war-status">{{ war.status }}</div>
                            </div>
                            <div class="war-details">
                                <div class="war-score">
                                    <span class="attacker">{{ war.attackerScore }}</span>
                                    <span class="separator">:</span>
                                    <span class="defender">{{ war.defenderScore }}</span>
                                </div>
                                <div class="war-territory" v-if="war.territoryName">
                                    Territory: {{ war.territoryName }}
                                </div>
                                <div class="war-started">
                                    Started: {{ formatDate(war.startedAt) }}
                                </div>
                            </div>
                            <div class="war-actions">
                                <button @click="viewWar(war)" class="action-btn small">
                                    <i class="fas fa-map-marker-alt"></i> View
                                </button>
                                <button v-if="hasPermission('declareWar') && (war.attackerId === gang.id)" @click="surrenderWar(war)" class="action-btn small danger">
                                    <i class="fas fa-flag"></i> Surrender
                                </button>
                            </div>
                        </div>
                        <div v-if="wars.length === 0" class="empty-state">
                            No active wars
                        </div>
                    </div>
                </div>

                <!-- Heists -->
                <div v-if="currentTab === 'heists'" class="tab-content">
                    <h2>Heists</h2>
                    <div class="action-bar" v-if="hasPermission('manageHeists')">
                        <button @click="showPlanHeistModal" class="action-btn">
                            <i class="fas fa-mask"></i> Plan Heist
                        </button>
                    </div>
                    <div class="heists-list">
                        <div v-for="heist in heists" :key="heist.id" class="heist-card">
                            <div class="heist-header">
                                <div class="heist-name">{{ heist.heistType }}</div>
                                <div class="heist-status">{{ heist.status }}</div>
                            </div>
                            <div class="heist-details">
                                <div class="heist-stage">Stage: {{ heist.currentStage }}</div>
                                <div class="heist-participants">Participants: {{ heist.participants ? heist.participants.length : 0 }}</div>
                                <div class="heist-started">Started: {{ formatDate(heist.startTime) }}</div>
                            </div>
                            <div class="heist-actions">
                                <button @click="viewHeist(heist)" class="action-btn small">
                                    <i class="fas fa-map-marker-alt"></i> View
                                </button>
                                <button @click="joinHeist(heist)" class="action-btn small">
                                    <i class="fas fa-sign-in-alt"></i> Join
                                </button>
                                <button v-if="hasPermission('manageHeists')" @click="cancelHeist(heist)" class="action-btn small danger">
                                    <i class="fas fa-times"></i> Cancel
                                </button>
                            </div>
                        </div>
                        <div v-if="heists.length === 0" class="empty-state">
                            No active heists
                        </div>
                    </div>
                </div>

                <!-- Vehicles -->
                <div v-if="currentTab === 'vehicles'" class="tab-content">
                    <h2>Gang Vehicles</h2>
                    <div class="action-bar" v-if="hasPermission('manageVehicles')">
                        <button @click="registerVehicle" class="action-btn">
                            <i class="fas fa-car-alt"></i> Register Vehicle
                        </button>
                    </div>
                    <div class="vehicles-list">
                        <div v-for="vehicle in vehicles" :key="vehicle.plate" class="vehicle-card">
                            <div class="vehicle-header">
                                <div class="vehicle-name">{{ vehicle.label }}</div>
                                <div class="vehicle-plate">{{ vehicle.plate }}</div>
                            </div>
                            <div class="vehicle-details">
                                <div class="vehicle-status" :class="{ 'stored': vehicle.stored }">
                                    {{ vehicle.stored ? 'Stored' : 'Out' }}
                                </div>
                                <div class="vehicle-impounded" v-if="vehicle.impounded">Impounded</div>
                            </div>
                            <div class="vehicle-actions">
                                <button v-if="!vehicle.stored && !vehicle.impounded" @click="trackVehicle(vehicle)" class="action-btn small">
                                    <i class="fas fa-search-location"></i> Track
                                </button>
                                <button v-if="vehicle.stored && !vehicle.impounded" @click="spawnVehicle(vehicle)" class="action-btn small">
                                    <i class="fas fa-car"></i> Spawn
                                </button>
                                <button v-if="!vehicle.stored && !vehicle.impounded" @click="storeVehicle(vehicle)" class="action-btn small">
                                    <i class="fas fa-parking"></i> Store
                                </button>
                            </div>
                        </div>
                        <div v-if="vehicles.length === 0" class="empty-state">
                            No registered vehicles
                        </div>
                    </div>
                </div>

                <!-- Stashes -->
                <div v-if="currentTab === 'stashes'" class="tab-content">
                    <h2>Gang Stashes</h2>
                    <div class="action-bar" v-if="hasPermission('manageStashes')">
                        <button @click="showCreateStashModal" class="action-btn">
                            <i class="fas fa-box"></i> Create Stash
                        </button>
                    </div>
                    <div class="stashes-sections">
                        <div class="stashes-section">
                            <h3>Main Stash</h3>
                            <div class="stashes-list">
                                <div class="stash-card" v-if="stashes.main">
                                    <div class="stash-header">
                                        <div class="stash-name">{{ stashes.main.name }}</div>
                                    </div>
                                    <div class="stash-details">
                                        <div class="stash-weight">Weight: {{ stashes.main.weight / 1000 }}kg</div>
                                        <div class="stash-slots">Slots: {{ stashes.main.slots }}</div>
                                    </div>
                                    <div class="stash-actions">
                                        <button @click="openStash('main')" class="action-btn small">
                                            <i class="fas fa-box-open"></i> Open
                                        </button>
                                    </div>
                                </div>
                                <div v-if="!stashes.main" class="empty-state">
                                    No main stash
                                </div>
                            </div>
                        </div>
                        <div class="stashes-section">
                            <h3>Shared Stashes</h3>
                            <div class="stashes-list">
                                <div v-for="(stash, id) in stashes.shared" :key="id" class="stash-card">
                                    <div class="stash-header">
                                        <div class="stash-name">{{ stash.name }}</div>
                                    </div>
                                    <div class="stash-details">
                                        <div class="stash-weight">Weight: {{ stash.weight / 1000 }}kg</div>
                                        <div class="stash-slots">Slots: {{ stash.slots }}</div>
                                    </div>
                                    <div class="stash-actions">
                                        <button @click="openStash(id)" class="action-btn small">
                                            <i class="fas fa-box-open"></i> Open
                                        </button>
                                        <button v-if="hasPermission('manageStashes')" @click="deleteStash(id)" class="action-btn small danger">
                                            <i class="fas fa-trash"></i> Delete
                                        </button>
                                    </div>
                                </div>
                                <div v-if="Object.keys(stashes.shared).length === 0" class="empty-state">
                                    No shared stashes
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Bank -->
                <div v-if="currentTab === 'bank'" class="tab-content">
                    <h2>Gang Bank</h2>
                    <div class="bank-balance">
                        <div class="balance-label">Current Balance:</div>
                        <div class="balance-amount">${{ formatNumber(gang.bank || 0) }}</div>
                    </div>
                    <div class="bank-actions">
                        <button @click="showDepositModal" class="action-btn">
                            <i class="fas fa-arrow-down"></i> Deposit
                        </button>
                        <button v-if="hasPermission('manageBank')" @click="showWithdrawModal" class="action-btn">
                            <i class="fas fa-arrow-up"></i> Withdraw
                        </button>
                        <button v-if="hasPermission('manageBank')" @click="showTransferModal" class="action-btn">
                            <i class="fas fa-exchange-alt"></i> Transfer
                        </button>
                    </div>
                    <div class="bank-transactions">
                        <h3>Recent Transactions</h3>
                        <div class="transactions-list">
                            <div v-for="(activity, index) in recentActivities" :key="index" class="transaction-item">
                                <div class="transaction-time">{{ activity.time }}</div>
                                <div class="transaction-desc">{{ activity.description }}</div>
                            </div>
                            <div v-if="recentActivities.length === 0" class="empty-state">
                                No recent transactions
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings -->
                <div v-if="currentTab === 'settings'" class="tab-content">
                    <h2>Gang Settings</h2>
                    <div class="settings-sections">
                        <div class="settings-section" v-if="gang.isLeader || hasPermission('manageSettings')">
                            <h3>Gang Information</h3>
                            <div class="settings-form">
                                <div class="form-group">
                                    <label>Gang Name</label>
                                    <input type="text" v-model="settings.name" placeholder="Gang Name">
                                    <button @click="changeGangName" class="action-btn small">Save</button>
                                </div>
                                <div class="form-group">
                                    <label>Gang Tag</label>
                                    <input type="text" v-model="settings.tag" placeholder="Gang Tag" maxlength="5">
                                    <button @click="changeGangTag" class="action-btn small">Save</button>
                                </div>
                                <div class="form-group">
                                    <label>Gang Color</label>
                                    <input type="color" v-model="settings.color">
                                    <button @click="changeGangColor" class="action-btn small">Save</button>
                                </div>
                                <div class="form-group">
                                    <label>Gang Logo URL</label>
                                    <input type="text" v-model="settings.logo" placeholder="Logo URL">
                                    <button @click="changeGangLogo" class="action-btn small">Save</button>
                                </div>
                            </div>
                        </div>
                        <div class="settings-section" v-if="gang.isLeader">
                            <h3>Leadership</h3>
                            <div class="settings-form">
                                <div class="form-group">
                                    <label>Transfer Leadership</label>
                                    <select v-model="settings.newLeader">
                                        <option value="">Select Member</option>
                                        <option v-for="member in members" :key="member.citizenId" :value="member.citizenId">
                                            {{ member.name }}
                                        </option>
                                    </select>
                                    <button @click="transferLeadership" class="action-btn small">Transfer</button>
                                </div>
                                <div class="form-group">
                                    <label>Max Members</label>
                                    <input type="number" v-model="settings.maxMembers" min="5" max="50">
                                    <button @click="setMaxMembers" class="action-btn small">Save</button>
                                </div>
                            </div>
                        </div>
                        <div class="settings-section">
                            <h3>Personal</h3>
                            <div class="settings-form">
                                <div class="form-group">
                                    <button @click="showLeaveGangModal" class="action-btn danger">
                                        <i class="fas fa-sign-out-alt"></i> Leave Gang
                                    </button>
                                </div>
                                <div class="form-group" v-if="gang.isLeader">
                                    <button @click="showDisbandGangModal" class="action-btn danger">
                                        <i class="fas fa-trash"></i> Disband Gang
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modals -->
        <div class="modal" v-if="showModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>{{ modalTitle }}</h3>
                    <span class="close-modal" @click="closeModal">Ã—</span>
                </div>
                <div class="modal-body">
                    <!-- Deposit Modal -->
                    <div v-if="modalType === 'deposit'">
                        <div class="form-group">
                            <label>Amount</label>
                            <input type="number" v-model="modalData.amount" placeholder="Enter amount">
                        </div>
                    </div>

                    <!-- Withdraw Modal -->
                    <div v-if="modalType === 'withdraw'">
                        <div class="form-group">
                            <label>Amount</label>
                            <input type="number" v-model="modalData.amount" placeholder="Enter amount">
                        </div>
                    </div>

                    <!-- Transfer Modal -->
                    <div v-if="modalType === 'transfer'">
                        <div class="form-group">
                            <label>Target Gang</label>
                            <select v-model="modalData.targetGangId">
                                <option value="">Select Gang</option>
                                <option v-for="g in availableGangs" :key="g.id" :value="g.id">
                                    {{ g.name }} ({{ g.tag }})
                                </option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Amount</label>
                            <input type="number" v-model="modalData.amount" placeholder="Enter amount">
                        </div>
                        <div class="form-group">
                            <label>Reason</label>
                            <input type="text" v-model="modalData.reason" placeholder="Enter reason">
                        </div>
                    </div>

                    <!-- Create Business Modal -->
                    <div v-if="modalType === 'createBusiness'">
                        <div class="form-group">
                            <label>Business Type</label>
                            <select v-model="modalData.businessType">
                                <option value="">Select Type</option>
                                <option value="dispensary">Dispensary</option>
                                <option value="bar">Bar</option>
                                <option value="garage">Garage</option>
                                <option value="club">Nightclub</option>
                            </select>
                        </div>
                    </div>

                    <!-- Upgrade Business Modal -->
                    <div v-if="modalType === 'upgradeBusiness'">
                        <div class="form-group">
                            <label>Upgrade Type</label>
                            <select v-model="modalData.upgradeType">
                                <option value="">Select Upgrade</option>
                                <option v-for="(upgrade, type) in businessUpgradeOptions" :key="type" :value="type">
                                    {{ upgrade.name }} (Level {{ upgrade.currentLevel }}/{{ upgrade.maxLevel }})
                                </option>
                            </select>
                        </div>
                        <div class="form-group" v-if="modalData.upgradeType && businessUpgradeOptions[modalData.upgradeType]">
                            <div class="upgrade-cost">
                                Cost: ${{ formatNumber(businessUpgradeOptions[modalData.upgradeType].cost) }}
                            </div>
                            <div class="upgrade-effects">
                                Effects: {{ businessUpgradeOptions[modalData.upgradeType].effects }}
                            </div>
                        </div>
                    </div>

                    <!-- Declare War Modal -->
                    <div v-if="modalType === 'declareWar'">
                        <div class="form-group">
                            <label>Target Gang</label>
                            <select v-model="modalData.targetGangId">
                                <option value="">Select Gang</option>
                                <option v-for="g in availableGangs" :key="g.id" :value="g.id">
                                    {{ g.name }} ({{ g.tag }})
                                </option>
                            </select>
                        </div>
                    </div>

                    <!-- Plan Heist Modal -->
                    <div v-if="modalType === 'planHeist'">
                        <div class="form-group">
                            <label>Heist Type</label>
                            <select v-model="modalData.heistType">
                                <option value="">Select Type</option>
                                <option value="convenience_store">Convenience Store</option>
                                <option value="jewelry_store">Jewelry Store</option>
                            </select>
                        </div>
                    </div>

                    <!-- Create Stash Modal -->
                    <div v-if="modalType === 'createStash'">
                        <div class="form-group">
                            <label>Stash Name</label>
                            <input type="text" v-model="modalData.name" placeholder="Enter name">
                        </div>
                        <div class="form-group">
                            <label>Minimum Rank</label>
                            <select v-model="modalData.minRank">
                                <option v-for="i in 6" :key="i" :value="i">
                                    {{ getRankName(i) }}
                                </option>
                            </select>
                        </div>
                    </div>

                    <!-- Kick Member Modal -->
                    <div v-if="modalType === 'kickMember'">
                        <div class="form-group">
                            <label>Reason</label>
                            <input type="text" v-model="modalData.reason" placeholder="Enter reason">
                        </div>
                    </div>

                    <!-- Leave Gang Modal -->
                    <div v-if="modalType === 'leaveGang'">
                        <p>Are you sure you want to leave the gang? This action cannot be undone.</p>
                    </div>

                    <!-- Disband Gang Modal -->
                    <div v-if="modalType === 'disbandGang'">
                        <p>Are you sure you want to disband the gang? This action cannot be undone and will remove all members.</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button @click="closeModal" class="action-btn cancel">Cancel</button>
                    <button @click="confirmModal" class="action-btn confirm">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
